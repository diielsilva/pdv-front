<p-panel header="Inserir Produto" styleClass="mt-2">
    <form [formGroup]="cartForm">
        <div class="mb-2">
            <p-inputNumber formControlName="productId" placeholder="ID do Produto" styleClass="w-full"
                class="w-full"></p-inputNumber>
        </div>
        <div class="mb-2">
            <p-inputNumber formControlName="amount" placeholder="Quantidade" styleClass="w-full"
                class="w-full"></p-inputNumber>
        </div>
        <p-button label="Adicionar ao Carrinho" [disabled]="shouldDisableInsertIntoCartButton()"
            (onClick)="handleInsertIntoCartButton()" [rounded]="true" styleClass="w-full"></p-button>
    </form>
</p-panel>

<p-panel header="Carrinho de Compras" styleClass="mt-2">
    @for (item of purchaseCart; track $index) {
    <p-panel header="Produto">
        <div>Descrição: {{ item.description }}</div>
        <div>Quantidade: {{ item.amount }}</div>
        <div>Preço: {{ item.price | currency }}</div>
        <ng-template pTemplate="footer">
            <div class="text-right">
                <p-button icon="pi pi-trash" (onClick)="handleRemoveFromCartButton(item.productId)"
                    [rounded]="true"></p-button>
            </div>
        </ng-template>
    </p-panel>

    } @empty {
    <div class="text-center">Não há produtos no carrinho!</div>
    }

    @if(purchaseCart.length > 0) {
    <p-panel header="Finalizar Venda" styleClass="mt-2">
        <form [formGroup]="saleForm">
            <div class="mb-2">
                <p-inputNumber formControlName="discount" placeholder="Desconto (Em %)" class="w-full"
                    styleClass="w-full"></p-inputNumber>
            </div>
            <div class="mb-2">
                <p-dropdown formControlName="paymentMethod" [options]="paymentMethods" placeholder="Forma de Pagamento"
                    class="w-full" styleClass="w-full"></p-dropdown>
            </div>
            <p-button label="Finalizar Venda" [disabled]="shouldDisableFinishSaleButton()"
                (onClick)="handleFinishSaleButton()" [rounded]="true" styleClass="w-full"></p-button>
        </form>
    </p-panel>
    }
</p-panel>